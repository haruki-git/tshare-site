<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Python：簡単なメモ帳ツールをつくる</title>
  <link rel="stylesheet" href="/assets/styles.css?v=1767337586503">
</head>
<body>
  <main class="container">
    <article class="card">
      <header>
        <h1>Python：簡単なメモ帳ツールをつくる</h1>
        <nav><a href="/posts/python/">Python記事一覧</a></nav>
        <p class="meta">投稿日：2026-01-02</p>
      </header>

      <section class="card" style="margin-top:12px;">
        <h2 style="margin:0 0 8px 0;">音声</h2>
        <audio controls preload="none" src="/posts/genba/audio/062128.mp3"></audio>
        <p class="meta" style="margin-top:8px; opacity:0.85;">※ AI音声で読み上げます</p>
      </section>

      <section id="sec-toc">
        <h2>目次</h2>
        <ol>
  <li><a href="#sec-1">はじめに</a></li>
  <li><a href="#sec-2">実装：最小コード</a></li>
  <li><a href="#sec-3">実行と確認</a></li>
  <li><a href="#sec-4">デバッグと1段ステップアップ（使い分けの基準）</a></li>
  <li><a href="#sec-5">注意（ここだけ）</a></li>
  <li><a href="#sec-6">要約</a></li>
</ol>
      </section>

      <section id="sec-1">
  <h3>はじめに</h3>
  <p>今回できるようになることは、シンプルなGUIメモ帳を作って保存と読み込みができるようになることです。</p>

<p>このセクションでは、変数・関数・モジュール（ファイル分割）の基礎を復習しつつ、実用的な最小アプリを作ります。</p>

<p>今回使う標準ライブラリは、tkinter（GUI）とファイル操作です。</p>

<p>わかりやすくするため、かたまりを小さくして説明します。</p>
</section>

<section id="sec-2">
  <h3>実装：最小コード</h3>
  <p>最小コードは次のとおりです。</p>

<pre><code>import tkinter as tk
from tkinter import filedialog, messagebox

def save():
    path = filedialog.asksaveasfilename(defaultextension=".txt")
    if path:
        with open(path, "w", encoding="utf-8") as f:
            f.write(txt.get("1.0", "end").rstrip())
        messagebox.showinfo("保存", "保存しました：" + path)

def open_file():
    path = filedialog.askopenfilename(filetypes=[("Text", "*.txt")])
    if path:
        with open(path, "r", encoding="utf-8") as f:
            txt.delete("1.0", "end")
            txt.insert("1.0", f.read())

root = tk.Tk()
root.title("簡単メモ帳")
txt = tk.Text(root, wrap="word")
txt.pack(expand=True, fill="both")
tk.Button(root, text="開く", command=open_file).pack(side="left")
tk.Button(root, text="保存", command=save).pack(side="right")
root.mainloop()</code></pre>

<p>このコードを実行すると小さなウィンドウが開きます。</p>
<p>テキストを入力して「保存」を押すとファイルとして書き出せます。</p>
<p>「開く」を押すと、選んだテキストファイルを読み込んで表示できます。</p>

<p>要素ごとにコードの解説をしていきます。</p>

<ul>
  <li><strong>1) import 部分</strong>
    <ul>
      <li><code>import tkinter as tk</code>：GUI部品（ウィンドウ、ボタン、テキスト欄など）を使うための読み込みです。</li>
      <li><code>from tkinter import filedialog, messagebox</code>：補助機能を読み込みます。
        <ul>
          <li><code>filedialog</code>：ファイルの「開く／保存」選択ダイアログです。</li>
          <li><code>messagebox</code>：通知（保存しました等）のダイアログです。</li>
        </ul>
      </li>
    </ul>
  </li>

  <li><strong>2) save 関数（保存）</strong>
    <ul>
      <li><code>filedialog.asksaveasfilename(defaultextension=".txt")</code>：保存先を選ばせ、拡張子が無ければ <code>.txt</code> を付けます。</li>
      <li><code>if path:</code>：キャンセル時は空になるので、空のときは何もしない安全策です。</li>
      <li><code>with open(path, "w", encoding="utf-8") as f:</code>：UTF-8 でテキストを書き込みます。</li>
      <li><code>txt.get("1.0", "end")</code>：テキスト欄の内容を取得します。
        <ul>
          <li><code>"1.0"</code>：先頭（1行目0文字目）です。</li>
          <li><code>"end"</code>：末尾です（Textは末尾に改行が入りやすいです）。</li>
        </ul>
      </li>
      <li><code>.rstrip()</code>：末尾の余分な改行や空白を落としてから保存します。</li>
      <li><code>messagebox.showinfo(...)</code>：保存できたことをポップアップで知らせます。</li>
    </ul>
  </li>

  <li><strong>3) open_file 関数（読み込み）</strong>
    <ul>
      <li><code>filedialog.askopenfilename(filetypes=[("Text", "*.txt")])</code>：テキストファイルだけ選びやすくします。</li>
      <li><code>if path:</code>：キャンセル時は空になるので、空のときは何もしないようにします。</li>
      <li><code>txt.delete("1.0", "end")</code>：いったん既存の表示を消します。</li>
      <li><code>txt.insert("1.0", f.read())</code>：ファイル内容を先頭から差し込みます。</li>
    </ul>
  </li>

  <li><strong>4) 画面（ウィンドウ・テキスト・ボタン）</strong>
    <ul>
      <li><code>root = tk.Tk()</code>：アプリ本体のウィンドウを作成します。</li>
      <li><code>root.title("簡単メモ帳")</code>：ウィンドウタイトルを付けます。</li>
      <li><code>txt = tk.Text(root, wrap="word")</code>：複数行入力できるテキスト欄です（単語の途中で折り返しにくくします）。</li>
      <li><code>txt.pack(expand=True, fill="both")</code>：ウィンドウサイズに合わせてテキスト欄が伸び縮みするように配置します。</li>
      <li><code>tk.Button(..., command=open_file)</code>／<code>command=save</code>：クリック時に呼ぶ関数を紐づけます。</li>
      <li><code>root.mainloop()</code>：GUIの待ち受けを開始します（これが無いとウィンドウがすぐ終了します）。</li>
    </ul>
  </li>
</ul>
</section>

<section id="sec-3">
  <h3>実行と確認</h3>
  <p>実行方法は次のとおりです。</p>
<ul>
  <li>ファイル名を memo.py として保存します。</li>
  <li>コマンドプロンプトやターミナルで python memo.py を実行します。</li>
  <li>VSCodeではファイルを開き、F5または「実行とデバッグ」を選んで実行します。</li>
</ul>
<pre><code class="language-bash">python memo.py
</code></pre>
<p>出力例として、メッセージボックスに "保存しました：C:\path\to\file.txt" と表示されます。</p>
<p>確認方法は次のとおりです。</p>
<ul>
  <li>テキストを入力して保存したあと、同じファイルを開いて内容が一致するか確認します。</li>
  <li>デバッグ用に一時的に save 関数へ print(len(txt.get("1.0","end"))) を追加し、行数や文字数を確認します。</li>
  <li>txt の型は tkinter.Text なので、type(txt) を確認すると把握できます。</li>
</ul>
</section>

<section id="sec-4">
  <h3>デバッグと1段ステップアップ（使い分けの基準）</h3>
  <p>デバッグの見方としては、printで中間値を出力して変数の中身を見る方法が即効性があります。</p>
  <p>logging（標準ライブラリ）を使うと、実行環境に応じて出力の詳細度を切り替えられます。</p>
  <p>小さなGUIでは、messageboxやprintでログを確認すると把握しやすいです。</p>

  <p>1段ステップアップとして、例外処理とファイルエンコーディング対応を追加すると堅牢になります。</p>
  <p>次は例として、saveをtry/exceptでラップした拡張例です。</p>
<pre><code class="language-python"># 拡張例（抜粋）
try:
    with open(path, "w", encoding="utf-8") as f:
        f.write(txt.get("1.0","end").rstrip())
except OSError as e:
    messagebox.showerror("エラー", f"保存できませんでした: {e}")</code></pre>

  <p>使い分けの基準として、短いテストや学習時はprint中心でも問題ありません。</p>
  <p>長期運用や複数人開発では、loggingと例外処理を使う前提にすると安定します。</p>

  <p>よくあるミスとして、ファイルダイアログの戻り値が空のときに処理を続けてしまうことがあります。</p>
  <p>ユーザーがキャンセルするとpathが空文字になるため、if path:で処理を囲むと回避できます。</p>
  <p>別ケースとして、tkinterが未インストールの環境ではImportErrorが出ることがあります。</p>
  <p>その場合は環境のPythonを入れ直すか、Linuxではtkinterを追加インストールすると解決しやすいです。</p>
</section>

<section id="sec-5">
  <h3>注意（ここだけ）</h3>
  <ul>
  <li><p>GUIでのファイル書き込みは上書きされるため、誤って同名ファイルを上書きしないように、必要に応じてバックアップや別名保存を促すUIを追加するのが要チェックです。</p></li>
</ul>
</section>

      <section id="sec-6">
  <h3>要約</h3>
  <ul>
  <li>Tkinter を使って簡単なメモ帳を作り、保存と読み込みができます。</li>
  <li>最小限のコードでウィンドウ、テキスト、ボタンを実装できます。</li>
  <li>実行は <pre><code>python memo.py</code></pre> または VSCode の実行機能で行えます。</li>
  <li>デバッグは print と logging を状況に応じて使い分けてください。</li>
  <li>よくあるミスはキャンセル時の空パスやエンコーディングの問題なので、if によるチェックと例外処理で対処してください。</li>
</ul>
</section>
    </article>
  </main>
</body>
</html>
