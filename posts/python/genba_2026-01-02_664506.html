<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Python：文字列ルール — ' " ''' とエスケープ、f文字列の基本</title>
  <link rel="stylesheet" href="/assets/styles.css?v=1767358555942">
</head>
<body>
  <main class="container">
    <article class="card">
      <header>
        <h1>Python：文字列ルール — ' " ''' とエスケープ、f文字列の基本</h1>
        <nav><a href="/posts/python/">Python記事一覧</a></nav>
        <p class="meta">投稿日：2026-01-02</p>
      </header>

      <section class="card" style="margin-top:12px;">
        <h2 style="margin:0 0 8px 0;">音声</h2>
        <audio controls preload="none" src="/posts/genba/audio/664506.mp3"></audio>
        <p class="meta" style="margin-top:8px; opacity:0.85;">※ AI音声で読み上げます</p>
      </section>

      <section id="sec-toc">
        <h2>目次</h2>
        <ol>
  <li><a href="#sec-1">Python文字列の基本と今回できること</a></li>
  <li><a href="#sec-2">引用符とエスケープのルール</a></li>
  <li><a href="#sec-3">f文字列と使い分けの基準</a></li>
  <li><a href="#sec-4">デバッグの見方と1段ステップアップ</a></li>
  <li><a href="#sec-5">注意（ここだけ）</a></li>
  <li><a href="#sec-6">要約</a></li>
</ol>
      </section>

      <section id="sec-1">
  <h3>Python文字列の基本と今回できること</h3>
  <p>今回できるようになることは、シングルクォート、ダブルクォート、トリプルクォート、エスケープ、f文字列の基本を理解して、簡単な実例を自分で動かせるようになることです。</p>

<p>最小コードは次のとおりです。</p>
<pre><code class="language-python"># strings_example.py
name = "太郎"
age = 30
s1 = 'Hello'
s2 = "He said \"Hi\""   # ダブルの中でダブルを使うときのエスケープ
s3 = 'It\'s fine'      # シングル内でシングルを使うときのエスケープ
s4 = """複数行
の文字列です。"""
g = f"{name}は{age}歳です"  # f文字列で変数埋め込み
print(s1, s2)
print(s3)
print(s4)
print(g)</code></pre>

<p>何が起きるかというと、このスクリプトは各種引用とエスケープ、f文字列の出力を順に表示できます。</p>

<p>実行方法は次のとおりです。</p>
<ol>
  <li>ファイル名を strings_example.py として保存します。</li>
  <li>ターミナルで python strings_example.py を実行します。</li>
  <li>または VSCode でファイルを開き、上部の再生ボタンで実行します。</li>
</ol>

<p>出力例は次のとおりです。</p>
<pre><code>Hello He said "Hi"
It's fine
複数行
の文字列です。
太郎は30歳です</code></pre>

<p>要チェックの確認方法は次のとおりです。</p>
<ul>
  <li>print で画面出力を確認します。</li>
  <li>type(g) を追加して型が str であることを確認します。</li>
  <li>部分的に print(name) と print(age) を入れて途中結果を確認します。</li>
</ul>
</section>

<section id="sec-2">
  <h3>引用符とエスケープのルール</h3>
  <p>シングル（'）とダブル（"）は基本的に同じ機能で、内側に同じ種類の引用を含める場合は、エスケープ（バックスラッシュ）を使います。エスケープは、文字を特別扱いから通常の文字に戻す操作です。</p>

<p>トリプル引用（''' または """）は、改行を含む長い文字列に使えます。</p>

<p>生文字列（r"..."）は、バックスラッシュをリテラルとして扱えますが、末尾にバックスラッシュを置けない制約があります。</p>

<p>よくあるミスとして、エスケープを忘れると SyntaxError になる場合があります。原因は引用が閉じられていないことなので、使う引用を変えるか、適切に <code>\'</code> や <code>\"</code> を入れると直せます。</p>
</section>

<section id="sec-3">
  <h3>f文字列と使い分けの基準</h3>
  <p>f文字列は式を中に書けるため、直感的に変数を埋め込めます。</p>

<p>使い分けのポイントは次のとおりです。</p>
<ul>
  <li>短く読みやすい埋め込みが欲しいときはf文字列が向いています。</li>
  <li>複雑なフォーマットが必要なときは<code>format()</code>や<code>%</code>演算子も候補になります。</li>
  <li>SQLや外部コマンドに渡す文字列は、f文字列で直接埋め込まずプレースホルダを使うほうが安全に設計できます。</li>
</ul>

<p>たとえば、小数点以下2桁に整形するには次のように書けます。</p>
<pre><code>f"{value:.2f}"</code></pre>

<p>可読性と安全性のバランスで選ぶと、運用しやすくなります。</p>

<p>あらためて基準を整理すると、短いメッセージやログはf文字列が読みやすいです。一方で、ユーザー入力を組み合わせる場面ではフォーマット関数とエスケープを検討すると安心です。また、複数行テンプレートはトリプル引用で作り、<code>format()</code>を使うと見通しが良くなります。</p>
</section>

<section id="sec-4">
  <h3>デバッグの見方と1段ステップアップ</h3>
  <p>デバッグの見方（print / logging / 変数の確認）は基本です。まずは print() で値と型を確認すると状況を切り分けやすくなります。より本格的には logging モジュールでログレベルを分けると便利です。</p>

<p>例です。</p>

<pre><code class="language-python">import logging
logging.basicConfig(level=logging.DEBUG, format="%(levelname)s:%(message)s")
x = "値"
logging.debug("x=%s type=%s", x, type(x))
</code></pre>

<p>この例ではデバッグログが表示され、値と型が出力されます。1段ステップアップとして関数化と例外処理を加えると、再利用性と堅牢性が上がります。短い関数にまとめ、try/except で予期しない型や値の問題を補足すると要チェック箇所が明確になります。</p>
</section>

<section id="sec-5">
  <h3>注意（ここだけ）</h3>
  <ul>
  <li><p>文字列操作でファイル上書きや削除を行うコードを扱う場合は、ファイル名やパスを検証し、バックアップを作成し、上書き前の確認処理を必ず実装してください。以上はこのセクションでの唯一の要チェックポイントです。</p></li>
</ul>
</section>

      <section id="sec-6">
  <h3>要約</h3>
  <ul>
  <li><p>シングルクォートとダブルクォートは同等であり、同じ種類の引用符の内側はエスケープで扱えることがわかります。</p></li>
  <li><p>トリプルクォートは複数行文字列に便利であり、f文字列は変数の埋め込みを簡単にできることがわかります。</p></li>
  <li><p>実行は <code>python file.py</code> または VSCode の実行ボタンで行えて、<code>print</code> と <code>type</code> で確認できることがわかります。</p></li>
  <li><p>デバッグはまず <code>print</code> から始めて、発展的には <code>logging</code> と関数化・例外処理でステップアップできることがわかります。</p></li>
  <li><p>ファイル操作など破壊的な処理は、事前検証とバックアップを実装して扱う必要があることがわかります。</p></li>
</ul>
</section>
    </article>
  </main>
</body>
</html>