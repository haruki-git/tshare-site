<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>使える正規表現パターン集 — 初年目エンジニア向け</title>
  <link rel="stylesheet" href="/assets/styles.css?v=1767406624605">
</head>
<body>
  <main class="container">
    <article class="card">
      <header>
        <h1>使える正規表現パターン集 — 初年目エンジニア向け</h1>
        <nav><a href="/posts/genba/">記事一覧</a></nav>
        <p class="meta">投稿日：2026-01-10</p>
      </header>

      <section class="card" style="margin-top:12px;">
        <h2 style="margin:0 0 8px 0;">音声</h2>
        <audio controls preload="none" src="/posts/genba/audio/genba_2026-01-10_347330.mp3"></audio>
        <p class="meta" style="margin-top:8px; opacity:0.85;">※ AI音声で読み上げます</p>
      </section>

      <section id="sec-toc">
        <h2>目次</h2>
        <ol>
  <li><a href="#sec-1">正規表現の基本</a></li>
  <li><a href="#sec-2">よく使うパターンと意味</a></li>
  <li><a href="#sec-3">ちょい自動化：短いスクリプト例（Python）</a></li>
  <li><a href="#sec-4">よくあるミスと切り分け（失敗例＋原因）</a></li>
  <li><a href="#sec-5">注意（ここだけ）</a></li>
  <li><a href="#sec-6">要約</a></li>
</ol>
      </section>

      <section id="sec-1">
  <h3>正規表現の基本</h3>
  <p>正規表現（レギュラーエクスプレッション、文字列のパターン検索・抽出を表す式）は、文字列を型のように扱って検索や置換を効率化できる技術です。</p>
<p>ここでは専門用語を必要に応じて簡単に説明しながら、実務で頻出する考え方だけに絞って解説します。</p>
<p>正規表現はツールや言語によって細かな差分があり、例えば改行の扱いやバックスラッシュのエスケープが異なる場合があります。そのため、最初に使う環境の「エンジンのクセ」を確認しておくことが大切です。</p>
<p>エンジンとは正規表現の処理をする実装のことで、環境によって挙動が変わる場合がある点は押さえておくと安心です。</p>
<p>最初は小さなパターンで試し、問題がなければ仕事で応用していく流れが安全です。</p>
</section>

<section id="sec-2">
  <h3>よく使うパターンと意味</h3>
  <p>ここでは現場で頻出する定番パターンを例文とともに説明します。</p>

<p>^ は行頭を表す記号です。$ は行末を表す記号です。. は任意の一文字を意味します。* は直前の要素の0回以上の繰り返しを意味します。+ は1回以上の繰り返しを意味します。? は直前の要素を0回か1回に限定します。</p>

<p>[] は文字クラスで、範囲や複数文字のどれか1文字を指定できます。() はグループ化で後で参照できます。| はOR（どちらか）を意味します。\d は数字、\w は英数字とアンダースコア、\s は空白を表すことが一般的です。</p>

<p>判断のポイントとしては「パターンが短くかつ過学習になっていないか」を見ると良いです。過学習は必要以上に限定して、別の正当な入力を弾いてしまう状況を指します。例えばメールアドレスのバリデーションは簡単な正規表現で十分な場合が多いため、複雑にしすぎないことをおすすめします。</p>
</section>

<section id="sec-3">
  <h3>ちょい自動化：短いスクリプト例（Python）</h3>
  <p>Python（パイソン）でログからエラー行だけ抽出してCSVに出す簡単な自動化例を示します。初年目の方はまず手で1ファイルで実験してから複数ファイルに適用すると進めやすいです。</p>
<p>以下はログファイルからタイムスタンプとエラーメッセージを抜き出す例です。コードを実行する前にテスト用の小さいログを用意すると失敗の切り分けが楽になります。</p>

<pre><code># !/usr/bin/env python3
import re
import csv
pattern = re.compile(r'(\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}).*(ERROR|WARN)\s*:\s*(.*)')
with open('app.log', 'r', encoding='utf-8') as f, open('errors.csv', 'w', newline='', encoding='utf-8') as out:
    writer = csv.writer(out)
    writer.writerow(['timestamp','level','message'])
    for line in f:
        m = pattern.search(line)
        if m:
            writer.writerow([m.group(1), m.group(2), m.group(3)])</code></pre>

<p>手順（最小のチェックリスト）は次の3点です。</p>
<ol>
  <li>小さなログでパターンがマッチすることを確認するとよいです。</li>
  <li>期待する列がCSVに出力されることを確認するとよいです。</li>
  <li>実運用前にバックアップをとってから複数ファイルで試すと安心です。</li>
</ol>
</section>

<section id="sec-4">
  <h3>よくあるミスと切り分け（失敗例＋原因）</h3>
  <p>ここでは典型的な失敗例を挙げて、原因と切り分け方を示します。</p>

<p>失敗例1は、バックスラッシュのエスケープ不足でパターンが動かないケースです。原因は、言語ごとに文字列リテラルの扱いが異なることです。切り分けでは、生の正規表現を小さなマッチテストツール（オンラインのテスターや言語のREPL）で実行して確認するとよいです。</p>

<p>失敗例2は、改行をまたぐパターンで <code>.</code> が改行にマッチせず抜けるケースです。原因は、エンジンの「dotall」モード（改行も含める設定）を使っていないことです。切り分けでは、改行を含む短いテキストで実験して、オプションを変えたときの差分を確認するとよいです。</p>

<p>失敗例3は、貪欲な <code>*</code> や <code>+</code> により必要以上に広く取ってしまい、意図した部分が抜けるケースです。原因は量指定子の選択ミスで、解決策は非貪欲（<code>?</code> を付ける）にするか、より具体的な文字クラスに置き換えることです。</p>

<p>これらの切り分けは、小さな例で繰り返しテストするだけでも多くの問題を特定できます。</p>

<p>軽いジョークとして、正規表現は強力な包丁のようなもので、急いで扱うと指も切りやすいですが、うまく使うと作業が早くなる感じです。</p>
</section>

<section id="sec-5">
  <h3>注意（ここだけ）</h3>
  <ul>
  <li><p>置換や一括適用は、必ずテストファイルやバックアップを用意してから実行してください。</p></li>
</ul>
</section>

      <section id="sec-6">
  <h3>要約</h3>
  <ul>
  <li>正規表現は文字列の検索・抽出・置換を効率化する式ですので、まず小さなテストで動作確認してください。</li>
  <li><code>^</code>や<code>$</code>、<code>.</code>、<code>*</code>、<code>+</code>、<code>?</code>、<code>[]</code>、<code>()</code>、<code>|</code>、<code>\d</code>、<code>\w</code>、<code>\s</code>などの基本パターンを押さえてから応用してください。</li>
  <li>Pythonなどで少し自動化するとログ処理が速くなりますので、まずは短いスクリプトで試してください。</li>
  <li>よくあるミスはエスケープ不足や改行の扱い、貪欲な量指定子の使い方ですので、小さな例で切り分けてください。</li>
  <li>置換作業では必ずバックアップを用意してから実行してください。</li>
</ul>
</section>
    </article>
  </main>
</body>
</html>