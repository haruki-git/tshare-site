ネットワークの基本構成と現場で役立つ見方。

ネットワークの基本要素。

ネットワークは端末同士がつながる仕組みです。まず押さえるべき用語を短く説明します。

 IP（アイピー）アドレスは機器の住所です。DNS（ディーエヌエス）は住所帳のように名前を住所に変換する仕組みです。

 LAN（ラン）は社内や家庭内など限られた範囲のネットワークを指します。DHCP（ディーエイチシーピー）は自動で住所（IP）を配る仕組みです。

 スイッチは同じLAN内で端末をつなぐ道具で、ルーターは異なるネットワーク間をつなぐ道具です。サブネットマスクは住所の範囲を示すルールです。

 これらを押さえると、構成図を読んだり簡単な設定の意図を理解できるようになります。例えば、あるPCがインターネットに出られないとき、まずそのPCに割り当てられているIP（アイピー）アドレスとサブネットマスクを確認すると、同じLAN内の他機器と通信できるかが分かります。

 ここでのポイントは、役割を理解してどの機器で何をしているかを想像できることです。

小規模ネットワークの構成例。

小さなオフィスや自宅を想定すると、構成は大きく分けて「回線終端装置（モデム）→ルーター→スイッチ→各端末」になります。

 無線機能が必要な場合は、ルーターの無線機能を使うか、アクセスポイント（AP）を追加します。

 IP（アイピー）アドレスはDHCP（ディーエイチシーピー）で自動配布することが一般的ですが、サーバーやプリンターなど固定で使いたい機器は静的IP（固定IP）にしておくと運用が楽になります。

 VLAN（ブイラン）を使うと、物理的に同じスイッチでも論理的にネットワークを分けられます。

 構成図を描くときは、各機器にどの役割（ルーティング、スイッチング、DHCP、DNSリレーなど）があるかを明記すると、現場での会話がスムーズになります。

 設定は画面（GUI）やコマンド（CLI）で行いますが、初めはGUIで現状を確認し、必要に応じてCLIの出力を参考にします。

 小規模でも「誰が設定を変えたか」「バックアップはどこにあるか」を決めておくと、後で困りにくくなります。

トラブル時の切り分けチェック方法。

切り分けは、どこで通信が止まっているかを順に絞り込む作業です。

 基本の手順は次のとおりです。

 
 
・端末側のIPアドレスとサブネットマスクを確認します。
 
・同一LAN内の他端末へpingで疎通を確認します。
 
・ゲートウェイ（ルーター）と外部（例: 8.8.8.8）へのping、DNSの名前解決（nslookup）で、到達範囲をさらに確認します。
 

 実施中は、応答の有無、遅延の有無、名前解決が通らないかどうかを観察します。

 判断のポイントとして、同一LAN内で通信できる場合は物理層とスイッチは問題ない可能性が高く、ゲートウェイ以降の設定やISP側の問題を疑うと効率的です。

 GUIで要チェックの場所は、ルーターの接続状態、スイッチのポート状態、APのクライアント一覧です。

 ログ（syslogやイベントビューア）を確認すると、切断や認証失敗の履歴を裏取りできます。

 切り分けを丁寧に進めることで、どの機器に問い合わせるべきかが明確になります。

よくある失敗例と原因。

避けたい例として、よくある失敗と原因を紹介します。

 
 
・IP（アイピー）アドレスの重複が起きることがあります。原因は静的IPを割り当てた機器とDHCPの範囲が重なっているためです。
 
・サブネットマスクの設定ミスが起きることがあります。原因はサブネットの切り方を誤解していたり、テンプレート流用時に値の違いを見落としたりするためです。
 
・DNS（ディーエヌエス）設定の誤りにより、名前解決だけができない状況になることがあります。原因は参照先DNSサーバーの指定が誤っているためです。
 

 IPアドレスの重複は、DHCPの範囲を見直すか、固定IPを予約することで解消しやすいです。

 サブネットマスクのミスは、結果として同一LAN内の機器と通信できないことがあるため、設計の前提と実設定の一致を要チェックにしておくと安定します。

 DNSの問題は、 nslookup や dig で名前解決の結果を確認し、設定を正しいDNSサーバーに向けると解決できます。

（コード例があります）

 最後に、ケーブルの挿し間違いやPoE給電不足などの物理的要因も起点になります。

 原因の切り分けは、物理→リンク層→ネットワーク層→アプリ層の順で進めると効率が良いです。

 ここで紹介した失敗は新人がやりがちなものなので、先に想定してチェックリスト化しておくと再発防止につながります。