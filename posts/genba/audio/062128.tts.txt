Python：簡単なメモ帳ツールをつくる

はじめに
今回できるようになることは、シンプルなジーユーアイのメモ帳を作って、保存と読み込みができるようになることです。

このセクションでは、変数、関数、モジュール、つまりファイル分割の基礎を復習しつつ、実用的な最小アプリを作ります。

今回使う標準ライブラリは、ティーケーインターと、ファイル操作です。

わかりやすくするため、かたまりを小さくして説明します。

実装：最小コード
最小コードは次のとおりです。
コード例があります。

このコードを実行すると小さなウィンドウが開きます。

テキストを入力して「保存」を押すと、ファイルとして書き出せます。

「開く」を押すと、選んだテキストファイルを読み込んで表示できます。

要素ごとにコードの解説をしていきます。

1、インポート部分
インポート ティーケーインター アズ ティーケー。
ジーユーアイ部品、ウィンドウ、ボタン、テキスト欄などを使うための読み込みです。
フロム ティーケーインター インポート ファイルダイアログ、メッセージボックス。
補助機能を読み込みます。
ファイルダイアログは、ファイルの「開く」「保存」選択ダイアログです。
メッセージボックスは、通知、たとえば「保存しました」などのダイアログです。

2、セーブ関数、保存
ファイルダイアログの、アスク セーブ アズ ファイルネーム。
保存先を選ばせ、拡張子が無ければ、テキストファイルの拡張子を付けます。
イフ パス。
キャンセル時は空になるので、空のときは何もしない安全策です。
ウィズ オープン、パス、ライト、ユーティーエフ エイト。
ユーティーエフ エイトでテキストを書き込みます。
ティーエックスティー ドット ゲット。
テキスト欄の内容を取得します。
開始位置は先頭、終了位置は末尾です。
テキスト欄は末尾に改行が入りやすいので、アール ストリップで末尾の余分な改行や空白を落としてから保存します。
メッセージボックスのショーインフォ。
保存できたことをポップアップで知らせます。

3、オープン ファイル関数、読み込み
ファイルダイアログの、アスク オープン ファイルネーム。
テキストファイルだけ選びやすくします。
イフ パス。
キャンセル時は空になるので、空のときは何もしないようにします。
ティーエックスティー ドット デリート。
いったん既存の表示を消します。
ティーエックスティー ドット インサート。
ファイル内容を先頭から差し込みます。

4、画面、ウィンドウ、テキスト、ボタン
ルート イコール ティーケー ドット ティーケー。
アプリ本体のウィンドウを作成します。
ルート ドット タイトル。
ウィンドウタイトルを付けます。
ティーエックスティー イコール ティーケー ドット テキスト。
複数行入力できるテキスト欄です。
ラップ ワードは、単語の途中で折り返しにくくする設定です。
ティーエックスティー ドット パック。
ウィンドウサイズに合わせてテキスト欄が伸び縮みするように配置します。
ティーケー ドット ボタン。
クリック時に呼ぶ関数を紐づけます。
最後に、ルート ドット メインループ。
ジーユーアイの待ち受けを開始します。これが無いとウィンドウがすぐ終了します。

実行と確認
実行方法は次のとおりです。

ファイル名を、メモ ドット パイとして保存します。
コマンドプロンプトやターミナルで、パイソン メモ ドット パイを実行します。
ブイエスコードではファイルを開き、エフファイブ、または「実行とデバッグ」を選んで実行します。
コード例があります。

出力例として、メッセージボックスに「保存しました」と表示されます。

確認方法は次のとおりです。

テキストを入力して保存したあと、同じファイルを開いて内容が一致するか確認します。
デバッグ用に一時的に、セーブ関数へプリントを追加し、文字数を確認します。
ティーエックスティーの型はティーケーインターのテキストなので、タイプを確認すると把握できます。

デバッグと1段ステップアップ、使い分けの基準
デバッグの見方としては、プリントで中間値を出力して変数の中身を見る方法が即効性があります。

ロギング、標準ライブラリを使うと、実行環境に応じて出力の詳細度を切り替えられます。

小さなジーユーアイでは、メッセージボックスやプリントでログを確認すると把握しやすいです。

1段ステップアップとして、例外処理とファイルの文字コード対応を追加すると堅牢になります。

次は例として、セーブをトライ エクセプトでラップした拡張例です。
コード例があります。

使い分けの基準として、短いテストや学習時はプリント中心でも問題ありません。

長期運用や複数人開発では、ロギングと例外処理を使う前提にすると安定します。

よくあるミスとして、ファイルダイアログの戻り値が空のときに処理を続けてしまうことがあります。

ユーザーがキャンセルするとパスが空文字になるため、イフ パスで処理を囲むと回避できます。

別ケースとして、ティーケーインターが未インストールの環境ではインポートエラーが出ることがあります。

その場合は環境のパイソンを入れ直すか、リナックスではティーケーインターを追加インストールすると解決しやすいです。